{"version":3,"sources":["main.js"],"names":["arrauxiliary","document","addEventListener","localStorage","getItem","cart","JSON","parse","showMiniCart","minNumber","newArr","bidArray","catalog","arr","maxNumber","xmlhttp","XMLHttpRequest","goods","i","length","Math","floor","Date","now","innerHTML","buyProduct","showModalCart","bidProduct","getElementsByClassName","makeBid","open","onreadystatechange","myObj","responseText","push","key","j","showGoods","startCoast","apply","min","send","articul","getAttribute","undefined","setItem","stringify","showCart","count","querySelector","result","image","totalSum","minusProduct","btnDelete","plusProduct","plusGoods","k","deleteGoods","this","saveCartToLS","headerCart","event","stopPropagation","cartClose","cartPopup","style","display","onkeydown","onclick","keyCode","bidBlock","bidObj","currentBid","offerValue","offerBid","bidWindowClose","parseInt","value","prodStartBid","htmlHeight","documentElement","scrollHeight","scrollTop","classList","add","scrolled","remove","scrollBtn","timer","window","scrollBy","setTimeout","clearTimeout","searchOut","onkeyup","resultSerch","searchInner","replace","search","myExp","menuItem","toggle"],"mappings":"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","file":"main.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n\t//проверяю наличие товаров в корзине\r\n\tif (localStorage.getItem('cart') != null) {\r\n\t\tcart = JSON.parse (localStorage.getItem('cart'));\r\n\t}\r\n\t\t//проверяем ставки в LS\r\n\t\tshowMiniCart()\r\n\t});\r\n\r\n\r\n//загрузка товаров\r\nvar myObj;\r\nvar arrauxiliary = []; //допмассив для фильтров и сортировки\r\nvar arr = []; //основной\r\nvar catalog;\r\nvar startCoast = []; \r\nvar\tmaxNumber;\r\nvar minNumber;\r\nvar newArr; // равный дефолтному\r\nvar bidArray = [];\r\nvar\tcatalog;;\r\n\r\nvar xmlhttp = new XMLHttpRequest();\r\nxmlhttp.open(\"GET\", \"goods.txt\", true);\r\n\r\nxmlhttp.onreadystatechange = function() {\r\n\tif ((this.readyState == 4) && (this.status == 200)) {\r\n\t\tmyObj = JSON.parse(this.responseText);\r\n\t\tfor (var key in myObj) {\r\n\t\t\tarr.push(myObj[key])\r\n\t\t}\r\n\t\tif (localStorage.getItem('bidItem') != null) {\r\n\t\t\tbidArray = JSON.parse (localStorage.getItem('bidItem'));\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tfor (var j = 0; j < bidArray.length; j++) {\r\n\t\t\t\t\tif (arr[i]['id'] == bidArray[j]['id']) {\r\n\t\t\t\t\t\tarr[i][\"start-coast\"] = bidArray[j][\"start-coast\"]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t//загружаем товары\r\n\tshowGoods()\r\n\r\n\tnewArr = arr.slice(0); //копируем дефолтный массив\r\n\tfor (var i = 0; i < arr.length; i++) {\r\n\t\tstartCoast.push(arr[i]['start-coast']);\r\n\t}\r\n\r\n\tmaxNumber = Math.max.apply(null, startCoast);\r\n\tminNumber = Math.min.apply(null, startCoast);\r\n\r\n}\r\n}\r\nxmlhttp.send();\r\n\r\n\r\nfunction showGoods() {\r\n\tgoods = \"\";\r\n\tfor (var i = 0; i < arr.length; i++) {\r\n\t\tgoods += '<div class = \"product-cell\">';\r\n\t\tgoods += '<a class = \"product-cell__picture\" href = '+ arr[i]['href'] +'>' + '<img class = \"product-img\" src = \"' + arr[i]['image'] +'\">' + '</a>';\r\n\t\tgoods += '<div class = \"product-cell__time\">' + \"До окончания аукциона: \" + Math.floor((new Date(arr[i]['start sale']) - Date.now())/86400000) + \" дн.\" +'</div>';\r\n\t\tgoods += '<h4 class = \"product-cell__title\">' + arr[i]['name'] + '</h4>';\r\n\t\tgoods += '<div class = \"product-cell__price\">'\r\n\t\tgoods += '<div class = \"price-title\">' + \"Текущая цена:\" + '</div>';\r\n\t\tgoods += '<div class = \"product-price\" data-art = \"'+ arr[i]['id']+'\">' + arr[i]['start-coast'] + '</div>';\r\n\t\tgoods += '</div>'\r\n\t\tgoods += '<div class = \"product-cell__price\">'\r\n\t\tgoods += '<div class = \"price-title\">' + \"Купить сейчас:\" + '</div>';\r\n\t\tgoods += '<div class = \"product-price\">' + arr[i]['coast'] + '</div>';\r\n\t\tgoods += '</div>'\r\n\t\tgoods += '<div class = \"product-cell__btn\">'\r\n\t\tgoods += '<div class = \"product-btn-bid\" data-art = \"'+arr[i]['id'] + '\">' + \"<p class = product-btn-title>\" + \"Сделать ставку\" + \"</p>\" + '</div>';\r\n\t\tgoods += '<div class = \"product-btn-buy\" data-art = \"'+ arr[i]['id']+'\">' + \"<p class = product-btn-title>\" + \"Купить\" + \"</p>\" + '</div>';\r\n\t\tgoods += '</div>'\r\n\t\tgoods += '</div>';\r\n\t}\r\n\tcatalog = document.querySelector(\".catalog-products\");\r\n\tcatalog.innerHTML = goods;\r\n\tvar buyProduct = document.getElementsByClassName(\"product-btn-buy\");\r\n\tfor ( var i = 0; i < buyProduct.length; i++) {\r\n\t\tbuyProduct[i].addEventListener('click', addToCart);\r\n\t\tbuyProduct[i].addEventListener('click', showModalCart);\r\n\t}\r\n\tvar bidProduct = document.getElementsByClassName(\"product-btn-bid\");\r\n\tfor (var i = 0; i < bidProduct.length; i++) {\r\n\t\tbidProduct[i].addEventListener(\"click\", makeBid)\r\n\t}\r\n}\r\n\r\n//Добавляем товар в корзину\r\nvar cart = {}; //корзина\r\nfunction addToCart() {\r\n\tvar articul = this.getAttribute('data-art');\r\n\tif (cart[articul]!=undefined) {\r\n\t\tcart[articul]++;\r\n\t} else cart[articul] = 1;\r\n\r\n\tlocalStorage.setItem('cart', JSON.stringify(cart));\r\n\tshowMiniCart();\r\n\tshowCart()\r\n}\r\n\r\n\r\nfunction showMiniCart() {\r\n\tvar count = 0;\r\n\t//показываем содеримое корзины\r\n\tfor (var j in cart) {\r\n\t\tcount++;\r\n\t}\r\n\r\n\tdocument.querySelector(\".count-goods\").innerHTML = count;\r\n}\r\n\r\nfunction showCart() {\r\n\tvar result = \"\";\r\n\tvar totalSum = 0;\r\n\r\n\tfor (var key in cart) {\r\n\t\tresult += '<div class = \"cart-info\">';\r\n\t\tresult += '<button class = \"cart-info__delete\" data-art = \"'+key+'\">X</button>';\r\n\t\tresult += '<img src = \"'+ myObj[key].image +'\" class = \"cart-info__img\">';\r\n\t\tresult += '<div class = \"cart-info__title\">'+ myObj[key]['name']+'</div>';\r\n\t\tresult += '<div class = \"cart-info__amount\">';\r\n\t\tresult += '<button class = \"cart-amount-minus\" data-art = \"'+key+'\">&ndash;</button>';\r\n\t\tresult += '<input class = \"cart-amount\" type = \"text\" value = \"'+cart[key]+'\">';\r\n\t\tresult += '<button class = \"cart-amount-plus\" data-art = \"'+key+'\">+</button>';\r\n\t\tresult += '</div>';\r\n\t\tresult += '<div class = \"cart-info__price\">';\r\n\t\tresult += '<span class = \"cart-sum\">'+ cart[key]*myObj[key]['coast']+'</span>';\r\n\t\tresult += '<span class = \"cart-currency\">грн</span>';\r\n\t\tresult += '</div>';\r\n\t\tresult += '</div>';\r\n\t\ttotalSum += cart[key]*myObj[key]['coast'];\r\n\t}\r\n\r\n\tdocument.querySelector(\".cart-popup__content\").innerHTML = result;\r\n\tdocument.querySelector(\".cart-total-sum\").innerHTML = totalSum;\r\n\r\n\tvar plusProduct = document.getElementsByClassName(\"cart-amount-plus\");\r\n\tvar minusProduct = document.getElementsByClassName(\"cart-amount-minus\");\r\n\tvar btnDelete = document.getElementsByClassName(\"cart-info__delete\");\r\n\tfor ( var i = 0; i < plusProduct.length; i++) {\r\n\t\tplusProduct[i].addEventListener('click', plusGoods);\r\n\t}\r\n\r\n\tfor ( var k = 0; k < minusProduct.length; k++) {\r\n\t\tminusProduct[k].addEventListener('click', minusGoods);\r\n\t}\r\n\r\n\tfor ( var j = 0; j < btnDelete.length; j++) {\r\n\t\tbtnDelete[j].addEventListener('click', deleteGoods);\r\n\t}\r\n}\r\n\r\nfunction plusGoods() {\r\n\tvar articul = this.getAttribute('data-art');\r\n\tcart[articul]++;\r\n\tsaveCartToLS();\r\n\tshowCart();       \r\n}\r\n\r\nfunction minusGoods() {\r\n\tvar articul = this.getAttribute('data-art');\r\n\tif (cart[articul] > 1) cart[articul]--;\r\n\telse delete cart[articul];\r\n\tsaveCartToLS();\r\n\tshowCart();\r\n\tshowMiniCart()\r\n}\r\n\r\nfunction deleteGoods() {\r\n\tvar articul = this.getAttribute('data-art');\r\n\tdelete cart[articul];\r\n\tsaveCartToLS();\r\n\tshowCart();\r\n\tshowMiniCart()\r\n}\r\n\r\nfunction saveCartToLS() {\r\n\tlocalStorage.setItem('cart', JSON.stringify(cart))\r\n}\r\n\r\n//модальное окно корзина\r\nvar headerCart = document.querySelector(\".header-cart\");\r\nheaderCart.addEventListener(\"click\", showModalCart);\r\nheaderCart.addEventListener(\"click\", showCart);\r\n\r\nfunction showModalCart() {\r\n\tvar cartPopup = document.querySelector(\".page__cart\");\r\n\tcartPopup.style.display = \"block\";\r\n\tdocument.querySelector(\".cart-popup__close\").addEventListener(\"click\", cartClose);\r\n\tdocument.querySelector(\".overlay-modal\").addEventListener(\"click\", cartClose);\r\n\tdocument.querySelector(\".cart-popup\").onclick = function(event) {event.stopPropagation()};\r\n\tdocument.querySelector(\".btn-continue\").addEventListener(\"click\", cartClose);\r\n\r\n\tdocument.onkeydown = function(event) {\r\n\t\tif (event.keyCode == 27) { \r\n\t\t\tcartClose();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction cartClose() {\r\n\t\tcartPopup.style.display = 'none';\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n\r\n//модальное окно сделать ставку\r\nfunction makeBid() {\r\n\tvar bidObj = {};\r\n\tvar result = \"\";\r\n\tvar bidBlock = document.querySelector(\".bid-block\");\r\n\tbidBlock.style.display = \"block\";\r\n\tvar articul = this.getAttribute('data-art');\r\n\tbidObj[articul] = 1;\r\n\tfor (var key in bidObj) {\r\n\t\tresult += '<div class = \"bid-info\">';\r\n\t\tresult += '<img src = \"'+ myObj[key].image +'\" class = \"bid-info__img\">';\r\n\t\tresult += '<div class = \"bid-info__title\">'+ myObj[key]['name']+'</div>';\r\n\t\tresult += '</div>';\r\n\t\tresult += '<div class = \"make-bid\">';\r\n\t\tresult += '<div class = \"bid-current\">';\r\n\t\tresult += '<p class = \"bid-current__title\">Текущая цена</p>';\r\n\t\tresult += '<div class = \"bid-current__price\">' + myObj[key]['start-coast'] + '</div>';\r\n\t\tresult += '</div>';\r\n\t\tresult += '<div class = \"bid-offer\">';\r\n\t\tresult += '<p class = \"bid-offer__title\">Ставка</p>';\r\n\t\tresult += '<input type = \"number\" class = \"bid-offer__price\">';\r\n\t\tresult += '</div>';\r\n\t\tresult += '<button class = \"make-bid-btn\">Сделать ставку</button>';\r\n\t\tresult += '</div>';\r\n\t\t\r\n\t}\r\n\r\n\tdocument.querySelector(\".bid-popup__content\").innerHTML = result;\r\n\r\n\tvar currentBid = document.querySelector(\".bid-current__price\");\r\n\tvar offerBid = document.querySelector(\".bid-offer__price\");\r\n\tofferBid.value = parseInt(currentBid.innerHTML) + 20;\r\n\r\n\tdocument.querySelector(\".make-bid-btn\").addEventListener(\"click\", function() {\r\n\t\tvar offerValue = offerBid.value;\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (arr[i]['id'] == articul) {\r\n\t\t\t\tarr[i]['start-coast'] = offerValue;\r\n\t\t\t\tcurrentBid.innerHTML = offerValue + \" грн\";\r\n\t\t\t\tbidArray.push(arr[i]);\r\n\t\t\t\tlocalStorage.setItem('bidItem', JSON.stringify(bidArray));\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar prodStartBid = document.getElementsByClassName(\"product-price\");\r\n\t\tfor (var i = 0; i < prodStartBid.length; i++) {\r\n\t\t\tif (prodStartBid[i].getAttribute(\"data-art\") == articul) {\r\n\t\t\t\tprodStartBid[i].innerHTML = offerValue + \" грн\";\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tdocument.querySelector(\".bid-popup__close\").addEventListener(\"click\", bidWindowClose);\r\n\tdocument.querySelector(\".overlay-modal_bid\").addEventListener(\"click\", bidWindowClose);\r\n\tdocument.querySelector(\".bid-popup\").onclick = function(event) {event.stopPropagation()}\r\n\tdocument.querySelector(\".btn-continue_size\").addEventListener(\"click\", bidWindowClose);\r\n\r\n\tdocument.onkeydown = function(event) {\r\n\t\tif (event.keyCode == 27) { \r\n\t\t\tbidWindowClose();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bidWindowClose() {\r\n\t\tbidBlock.style.display = 'none';\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n}\r\n\r\n//фиксация меню\r\nvar htmlHeight = document.documentElement.scrollHeight;\r\nwindow.addEventListener('scroll', function() {\r\n\tvar scrolling = document.documentElement.scrollTop;\r\n\tif (scrolling > 150 && htmlHeight > 800) {\r\n\t\tdocument.querySelector(\".header__top\").classList.add(\"fixed-line\");\r\n\t} else {\r\n\t\tdocument.querySelector(\".header__top\").classList.remove('fixed-line');\r\n\t};\r\n});\r\n\r\n\r\nvar scrollBtn = document.querySelector(\".scroll-top\");\r\nvar scrolled;\r\nvar timer;\r\n\r\nwindow.addEventListener (\"scroll\", function() {\r\n\tscrolled = document.documentElement.scrollTop;\r\n\tif (scrolled > 100) {\r\n\t\tscrollBtn.style.display = \"block\";\r\n\t} else scrollBtn.style.display = \"none\";\r\n})\r\n\r\ndocument.querySelector(\".scroll-top\").addEventListener(\"click\", function scrollTop() {\r\n\tif (scrolled > 0) {\r\n\t\twindow.scrollBy(0, -140);\r\n\t\ttimer = setTimeout(scrollTop, 80);\r\n\t} else {\r\n\t\tclearTimeout(timer);\r\n\t}\r\n})\r\n\r\n//поиск на сайте\r\n\r\nvar searchOut = document.querySelector(\".search-result\");\r\ndocument.querySelector(\".search-form__inner\").onkeyup = function() {\r\n\tsearchOut.innerHTML = \"\";\r\n\tvar resultSerch = \"\";\r\n\tvar searchInner = this.value.replace(/(^\\s+|\\s+$)/g, \"\");\r\n\tvar myExp = new RegExp (searchInner, \"i\");\r\n\tfor (var key in myObj) {\r\n\t\tif (myObj[key]['name'].search(myExp) != -1) {\r\n\t\t\tresultSerch += '<div class=\"search-result__list\">' + myObj[key]['name'] + '</div>';\r\n\t\t}\r\n\t}\r\n\tsearchOut.innerHTML += resultSerch;\r\n\tif (searchInner == \"\") searchOut.innerHTML = \"\";\r\n}\r\n\r\ndocument.querySelector(\".nav-open\").onclick = function() {\r\n\tdocument.querySelector(\".menu-wrapper\").classList.toggle(\"menu-wrapper_visible\");\r\n\tvar menuItem = document.getElementsByClassName(\"main-menu__item\");\r\n\tfor (var i = 0; i < menuItem.length; i ++) {\r\n\t\tmenuItem[i].addEventListener(\"mouseover\", function() {\r\n\t\t\tdocument.querySelector(\".hidden-menu\").style.display = \"block\";\r\n\t\t})\r\n\t}\r\n}\r\n\r\n"]}