{"version":3,"sources":["new-offer.js"],"names":["inputImg","document","querySelector","imgPreview","addEventListener","curFiles","files","length","note","createElement","textContent","appendChild","classList","add","i","imgItem","validFileType","name","returnFileSize","size","image","style","backgroundImage","window","URL","createObjectURL","insertAdjacentHTML","delImgBtn","getElementsByClassName","removeChild","this","parentNode","fileTypes","file","type","number","toFixed"],"mappings":"AAAA,IAAIA,SAAWC,SAASC,cAAc,mBACjCC,WAAaF,SAASC,cAAc,gBAExCF,SAASI,iBAAiB,SAAU,WACnC,IAAIC,EAAWL,SAASM,MAExB,GAAA,GAAID,EAASE,QACRC,EAAOP,SAASQ,cAAc,MAC7BC,YAAc,iBACnBP,WAAWQ,YAAYH,GACvBA,EAAKI,UAAUC,IAAI,0BAEnB,IAAK,IAAIC,EAAT,EAAgBA,EAAIT,EAASE,OAAQO,IAAK,CACzC,IACIN,EADAO,EAAUd,SAASQ,cAAc,OAIrC,IAHID,EAAOP,SAASQ,cAAc,MAC7BG,UAAUC,IAAI,qBAEfG,cAAcX,EAAAS,IAAc,CAC/BN,EAAKE,YAAc,aAAeL,EAAAS,GAAYG,KAAO,YAAcC,eAAeb,EAAAS,GAAYK,MAAQ,IACtG,IAAIC,EAAQnB,SAASQ,cAAc,OACnCW,EAAMC,MAAMC,gBAAkB,OAASC,OAAOC,IAAIC,gBAAgBpB,EAAAS,IAAc,IAChFC,EAAQJ,YAAYS,GACpBA,EAAMR,UAAUC,IAAI,mBACpBO,EAAMM,mBAAmB,WAAY,gDACrCX,EAAQJ,YAAYH,QAEpBA,EAAKE,YAAc,0BACnBK,EAAQJ,YAAYH,GAGrBL,WAAWQ,YAAYI,GACvBA,EAAQH,UAAUC,IAAI,qBAGxB,IAAIc,EAAY1B,SAAS2B,uBAAuB,uBAEhD,IAASd,EAAT,EAAgBA,EAAIa,EAAUpB,OAAQO,IACrCa,EAAAb,GAAaV,iBAAiB,QAAS,WACtCD,WAAW0B,YAAYC,KAAKC,gBAK/B,IAAIC,UACJ,CAAA,aAKA,cACC,aAGE,SAAAhB,cAAAiB,GACD,IAAA,IAAAnB,EAAA,EAAAA,EAAAkB,UAAAzB,OAAAO,IAHA,GAAGmB,EAAKC,OAASF,UAAUlB,GAK5B,OAAO,EAIP,OAAIqB,EAGH,SAAQA,eAAaC,GADf,OAAAD,EAEGA,KACDA,EAAO,QACf,MAAAA,GAAAA,EAAA,SACDA,EAAA,MAAAC,QAAA,GAAA,KAHoB,SAAVD,GACDA,EAAO,SAASC,QAAQ,GAAK,UAD/B","file":"new-offer.js","sourcesContent":["var inputImg = document.querySelector(\".img-load__file\");\r\n\tvar imgPreview = document.querySelector(\".img-preview\");\r\n\r\n\tinputImg.addEventListener('change', function() {\r\n\t\tvar curFiles = inputImg.files;\r\n\r\n\t\tif (curFiles.length == 0) {\r\n\t\t\tvar note = document.createElement('p');\r\n\t\t\tnote.textContent = 'Файл не выбран';\r\n\t\t\timgPreview.appendChild(note);\r\n\t\t\tnote.classList.add(\"img-preview__text\");\r\n\t\t} else {\r\n\t\t\tfor (var i = 0; i < curFiles.length; i++) {\r\n\t\t\t\tvar imgItem = document.createElement('div');\r\n\t\t\t\tvar note = document.createElement('p');\r\n\t\t\t\tnote.classList.add(\"img-preview__text\");\r\n\r\n\t\t\t\tif (validFileType(curFiles[i])) {\r\n\t\t\t\t\tnote.textContent = 'Имя файла ' + curFiles[i].name + ', размер ' + returnFileSize(curFiles[i].size) + '.';\r\n\t\t\t\t\tvar image = document.createElement('img');\r\n\t\t\t\t\timage.style.backgroundImage = \"url(\" + window.URL.createObjectURL(curFiles[i]) +\")\";\r\n\t\t\t\t\timgItem.appendChild(image);\r\n\t\t\t\t\timage.classList.add(\"preview-picture\");\r\n\t\t\t\t\timage.insertAdjacentHTML(\"afterEnd\", \"<span class = 'img-preview__delete'>x</span>\")\r\n\t\t\t\t\timgItem.appendChild(note);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnote.textContent = 'Не допустимый тип файла';\r\n\t\t\t\t\timgItem.appendChild(note);\r\n\t\t\t\t}\r\n\r\n\t\t\t\timgPreview.appendChild(imgItem);\r\n\t\t\t\timgItem.classList.add(\"img-preview__item\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar delImgBtn = document.getElementsByClassName(\"img-preview__delete\");\r\n\t\t\r\n\t\tfor (var i = 0; i < delImgBtn.length; i++) {\r\n\t\t\tdelImgBtn[i].addEventListener(\"click\", function() {\r\n\t\t\t\timgPreview.removeChild(this.parentNode);\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\n\tvar fileTypes = [\r\n\t'image/jpeg',\r\n\t'image/pjpeg',\r\n\t'image/png'\r\n\t]\r\n\r\n\tfunction validFileType(file) {\r\n\t\tfor(var i = 0; i < fileTypes.length; i++) {\r\n\t\t\tif(file.type === fileTypes[i]) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction returnFileSize(number) {\r\n\t\tif (number < 1024) {\r\n\t\t\treturn number + 'bytes';\r\n\t\t} else if(number >= 1024 && number < 1048576) {\r\n\t\t\treturn (number/1024).toFixed(1) + 'KB';\r\n\t\t} else if(number >= 1048576) {\r\n\t\t\treturn (number/1048576).toFixed(1) + 'MB';\r\n\t\t}\r\n\t}"]}