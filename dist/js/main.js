var myObj;document.addEventListener("DOMContentLoaded",function(){null!=localStorage.getItem("cart")&&(cart=JSON.parse(localStorage.getItem("cart"))),showMiniCart()});var maxNumber,minNumber,newArr,catalog,arrauxiliary=[],arr=[],startCoast=[],bidArray=[],xmlhttp=new XMLHttpRequest;function showGoods(){goods="";for(var t=0;t<arr.length;t++)goods+='<div class = "product-cell">',goods+='<a class = "product-cell__picture" href = '+arr[t].href+'><img class = "product-img" src = "'+arr[t].image+'"></a>',goods+='<div class = "product-cell__time">До окончания аукциона: '+Math.floor((new Date(arr[t]["start sale"])-Date.now())/864e5)+" дн.</div>",goods+='<h4 class = "product-cell__title">'+arr[t].name+"</h4>",goods+='<div class = "product-cell__price">',goods+='<div class = "price-title">Текущая цена:</div>',goods+='<div class = "product-price" data-art = "'+arr[t].id+'">'+arr[t]["start-coast"]+"</div>",goods+="</div>",goods+='<div class = "product-cell__price">',goods+='<div class = "price-title">Купить сейчас:</div>',goods+='<div class = "product-price">'+arr[t].coast+"</div>",goods+="</div>",goods+='<div class = "product-cell__btn">',goods+='<div class = "product-btn-bid" data-art = "'+arr[t].id+'"><p class = product-btn-title>Сделать ставку</p></div>',goods+='<div class = "product-btn-buy" data-art = "'+arr[t].id+'"><p class = product-btn-title>Купить</p></div>',goods+="</div>",goods+="</div>";(catalog=document.querySelector(".catalog-products")).innerHTML=goods;var e=document.getElementsByClassName("product-btn-buy");for(t=0;t<e.length;t++)e[t].addEventListener("click",addToCart),e[t].addEventListener("click",showModalCart);var r=document.getElementsByClassName("product-btn-bid");for(t=0;t<r.length;t++)r[t].addEventListener("click",makeBid)}xmlhttp.open("GET","goods.txt",!0),xmlhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){for(var t in myObj=JSON.parse(this.responseText))arr.push(myObj[t]);if(null!=localStorage.getItem("bidItem")){bidArray=JSON.parse(localStorage.getItem("bidItem"));for(var e=0;e<arr.length;e++)for(var r=0;r<bidArray.length;r++)arr[e].id==bidArray[r].id&&(arr[e]["start-coast"]=bidArray[r]["start-coast"])}showGoods(),newArr=arr.slice(0);for(e=0;e<arr.length;e++)startCoast.push(arr[e]["start-coast"]);maxNumber=Math.max.apply(null,startCoast),minNumber=Math.min.apply(null,startCoast)}},xmlhttp.send();var cart={};function addToCart(){var t=this.getAttribute("data-art");null!=cart[t]?cart[t]++:cart[t]=1,localStorage.setItem("cart",JSON.stringify(cart)),showMiniCart(),showCart()}function showMiniCart(){var t=0;for(var e in cart)t++;document.querySelector(".count-goods").innerHTML=t}function showCart(){var t="",e=0;for(var r in cart)t+='<div class = "cart-info">',t+='<button class = "cart-info__delete" data-art = "'+r+'">X</button>',t+='<img src = "'+myObj[r].image+'" class = "cart-info__img">',t+='<div class = "cart-info__title">'+myObj[r].name+"</div>",t+='<div class = "cart-info__amount">',t+='<button class = "cart-amount-minus" data-art = "'+r+'">&ndash;</button>',t+='<input class = "cart-amount" type = "text" value = "'+cart[r]+'">',t+='<button class = "cart-amount-plus" data-art = "'+r+'">+</button>',t+="</div>",t+='<div class = "cart-info__price">',t+='<span class = "cart-sum">'+cart[r]*myObj[r].coast+"</span>",t+='<span class = "cart-currency">грн</span>',t+="</div>",t+="</div>",e+=cart[r]*myObj[r].coast;document.querySelector(".cart-popup__content").innerHTML=t,document.querySelector(".cart-total-sum").innerHTML=e;for(var a=document.getElementsByClassName("cart-amount-plus"),o=document.getElementsByClassName("cart-amount-minus"),c=document.getElementsByClassName("cart-info__delete"),n=0;n<a.length;n++)a[n].addEventListener("click",plusGoods);for(var s=0;s<o.length;s++)o[s].addEventListener("click",minusGoods);for(var i=0;i<c.length;i++)c[i].addEventListener("click",deleteGoods)}function plusGoods(){var t=this.getAttribute("data-art");cart[t]++,saveCartToLS(),showCart()}function minusGoods(){var t=this.getAttribute("data-art");1<cart[t]?cart[t]--:delete cart[t],saveCartToLS(),showCart(),showMiniCart()}function deleteGoods(){var t=this.getAttribute("data-art");delete cart[t],saveCartToLS(),showCart(),showMiniCart()}function saveCartToLS(){localStorage.setItem("cart",JSON.stringify(cart))}var headerCart=document.querySelector(".header-cart");function showModalCart(){var t=document.querySelector(".page__cart");function e(){return!(t.style.display="none")}t.style.display="block",document.querySelector(".cart-popup__close").addEventListener("click",e),document.querySelector(".overlay-modal").addEventListener("click",e),document.querySelector(".cart-popup").onclick=function(t){t.stopPropagation()},document.querySelector(".btn-continue").addEventListener("click",e),document.onkeydown=function(t){27==t.keyCode&&e()}}function makeBid(){var t={},e="",r=document.querySelector(".bid-block");r.style.display="block";var a=this.getAttribute("data-art");for(var o in t[a]=1,t)e+='<div class = "bid-info">',e+='<img src = "'+myObj[o].image+'" class = "bid-info__img">',e+='<div class = "bid-info__title">'+myObj[o].name+"</div>",e+="</div>",e+='<div class = "make-bid">',e+='<div class = "bid-current">',e+='<p class = "bid-current__title">Текущая цена</p>',e+='<div class = "bid-current__price">'+myObj[o]["start-coast"]+"</div>",e+="</div>",e+='<div class = "bid-offer">',e+='<p class = "bid-offer__title">Ставка</p>',e+='<input type = "number" class = "bid-offer__price">',e+="</div>",e+='<button class = "make-bid-btn">Сделать ставку</button>',e+="</div>";document.querySelector(".bid-popup__content").innerHTML=e;var c=document.querySelector(".bid-current__price"),n=document.querySelector(".bid-offer__price");function s(){return!(r.style.display="none")}n.value=parseInt(c.innerHTML)+20,document.querySelector(".make-bid-btn").addEventListener("click",function(){for(var t=n.value,e=0;e<arr.length;e++)arr[e].id==a&&(arr[e]["start-coast"]=t,c.innerHTML=t+" грн",bidArray.push(arr[e]),localStorage.setItem("bidItem",JSON.stringify(bidArray)));var r=document.getElementsByClassName("product-price");for(e=0;e<r.length;e++)r[e].getAttribute("data-art")==a&&(r[e].innerHTML=t+" грн")}),document.querySelector(".bid-popup__close").addEventListener("click",s),document.querySelector(".overlay-modal_bid").addEventListener("click",s),document.querySelector(".bid-popup").onclick=function(t){t.stopPropagation()},document.querySelector(".btn-continue_size").addEventListener("click",s),document.onkeydown=function(t){27==t.keyCode&&s()}}headerCart.addEventListener("click",showModalCart),headerCart.addEventListener("click",showCart);var htmlHeight=document.documentElement.scrollHeight;window.addEventListener("scroll",function(){150<document.documentElement.scrollTop&&800<htmlHeight?document.querySelector(".header__top").classList.add("fixed-line"):document.querySelector(".header__top").classList.remove("fixed-line")});var scrolled,timer,scrollBtn=document.querySelector(".scroll-top");window.addEventListener("scroll",function(){scrolled=document.documentElement.scrollTop,scrollBtn.style.display=100<scrolled?"block":"none"}),document.querySelector(".scroll-top").addEventListener("click",function t(){0<scrolled?(window.scrollBy(0,-140),timer=setTimeout(t,80)):clearTimeout(timer)});var searchOut=document.querySelector(".search-result");document.querySelector(".search-form__inner").onkeyup=function(){var t=searchOut.innerHTML="",e=this.value.replace(/(^\s+|\s+$)/g,""),r=new RegExp(e,"i");for(var a in myObj)-1!=myObj[a].name.search(r)&&(t+='<div class="search-result__list">'+myObj[a].name+"</div>");searchOut.innerHTML+=t,""==e&&(searchOut.innerHTML="")},document.querySelector(".nav-open").onclick=function(){document.querySelector(".menu-wrapper").classList.toggle("menu-wrapper_visible");for(var t=document.getElementsByClassName("main-menu__item"),e=0;e<t.length;e++)t[e].addEventListener("mouseover",function(){document.querySelector(".hidden-menu").style.display="block"})};
//# sourceMappingURL=main.js.map
